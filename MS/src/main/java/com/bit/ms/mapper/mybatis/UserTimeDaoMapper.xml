<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.bit.ms.dao.UserDaoInterface">
	
	<!-- 선택한 좌석의 유저 시간 업데이트(사용시간, 충전시간, 좌석번호) -->
	<update id="updateUserAddTime" parameterType="map">
		update userinfo set user_time=((user_time-#{param1})+#{param2}), seat_id=#{param3} 
		where user_id=#{param4}
	</update>
	
	<!-- 사용 중인 모든 좌석의 유저 시간 업데이트(사용시간) -->
	<update id="updateUserAddTimeAll">
		update userinfo set user_time=user_time-#{use_time}
		where seat_id is not null
	</update>
	
	<!-- 현재 좌석 사용 중인 사용자 정보 모두 가져오기 -->
	<select id="getUserInfo" resultType="userVO">
		select * from userinfo
		where seat_id is not null
	</select>
	
	<!-- 로그인한 유저의 좌석 사용 상태 검사 -->
	<select id="isUsingSeat" resultType="userVO">
		select * from userinfo 
		where user_id=#{user_id} and seat_id is not null
	</select>
</mapper>